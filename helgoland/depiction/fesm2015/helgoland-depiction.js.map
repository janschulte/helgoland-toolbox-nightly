{"version":3,"file":"helgoland-depiction.js.map","sources":["ng://@helgoland/depiction/lib/label-mapper/label-mapper.service.ts","ng://@helgoland/depiction/lib/label-mapper/label-mapper.component.ts","ng://@helgoland/depiction/lib/label-mapper/label-mapper.module.ts","ng://@helgoland/depiction/lib/datasetlist/list-entry.component.ts","ng://@helgoland/depiction/lib/datasetlist/profile-entry/profile-entry.component.ts","ng://@helgoland/depiction/lib/datasetlist/timeseries/simple-timeseries-entry/simple-timeseries-entry.component.ts","ng://@helgoland/depiction/lib/datasetlist/timeseries/configurable-timeseries-entry/configurable-timeseries-entry.component.ts","ng://@helgoland/depiction/lib/datasetlist/timeseries/first-latest-timeseries-entry/first-latest-timeseries-entry.component.ts","ng://@helgoland/depiction/lib/datasetlist/timeseries/timeseries-entry/timeseries-entry.component.ts","ng://@helgoland/depiction/lib/datasetlist/trajectory-entry/trajectory-entry.component.ts","ng://@helgoland/depiction/lib/datasetlist/module.ts","ng://@helgoland/depiction/lib/dataset-table/dataset-table.component.ts","ng://@helgoland/depiction/lib/dataset-table/module.ts"],"sourcesContent":["import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { IdCache, Settings, SettingsService } from '@helgoland/core';\nimport { Observable } from 'rxjs/Observable';\nimport { Observer } from 'rxjs/Observer';\n\ndeclare var $: any;\n\n@Injectable()\nexport class LabelMapperService {\n\n    private cache: IdCache<string> = new IdCache();\n\n    constructor(\n        protected httpClient: HttpClient,\n        protected settingsSrvc: SettingsService<Settings>\n    ) { }\n\n    public getMappedLabel(label: string): Observable<string> {\n        return new Observable<string>((observer: Observer<string>) => {\n            if (!this.settingsSrvc.getSettings().solveLabels) {\n                this.confirmLabel(observer, label);\n            } else {\n                const url = this.findUrl(label);\n                if (url) {\n                    if (this.cache.has(url)) {\n                        this.confirmLabel(observer, this.cache.get(url));\n                    } else {\n                        const labelUrl =\n                            this.settingsSrvc.getSettings().proxyUrl ? this.settingsSrvc.getSettings().proxyUrl + url : url;\n                        this.httpClient.get(labelUrl, { responseType: 'text' }).subscribe((res) => {\n                            try {\n                                const xml = $.parseXML(res);\n                                label = label.replace(url, $(xml).find('prefLabel').text());\n                            } catch (error) {\n                                // currently do nothing and use old label\n                            }\n                            this.cache.set(url, label);\n                            this.confirmLabel(observer, label);\n                        }, (error) => {\n                            const resolvedLabel = label.substring(label.lastIndexOf('/') + 1, label.length);\n                            this.cache.set(url, resolvedLabel);\n                            this.confirmLabel(observer, resolvedLabel);\n                        });\n                    }\n                } else {\n                    this.confirmLabel(observer, label);\n                }\n            }\n        });\n    }\n\n    private confirmLabel(observer: Observer<string>, label: string) {\n        observer.next(label);\n        observer.complete();\n    }\n\n    private findUrl(label: string) {\n        const source = (label || '').toString();\n        const regexToken = /(((ftp|https?):\\/\\/)[\\-\\w@:%_\\+.~#?&\\/\\/=]+)/g;\n        const matchArray = regexToken.exec(source);\n        if (matchArray !== null) {\n            return matchArray[0];\n        }\n        return null;\n    }\n}\n","import { Component, Input, OnChanges, SimpleChanges } from '@angular/core';\n\nimport { LabelMapperService } from './label-mapper.service';\n\n@Component({\n    selector: 'n52-label-mapper',\n    template: `<span *ngIf=\"determinedLabel\">{{determinedLabel}}</span>\n<span *ngIf=\"loading\">\n  <span class=\"glyphicon glyphicon-refresh icon-spin\"></span>\n  <span> loading label ...</span>\n</span>\n`\n})\nexport class LabelMapperComponent implements OnChanges {\n\n    @Input()\n    public label: string;\n\n    public determinedLabel: string;\n\n    public loading = true;\n\n    constructor(\n        protected labelMapperSrvc: LabelMapperService\n    ) { }\n\n    public ngOnChanges(changes: SimpleChanges): void {\n        if (changes.label) {\n            this.labelMapperSrvc.getMappedLabel(this.label)\n                .subscribe((label) => {\n                    this.determinedLabel = label;\n                    this.loading = false;\n                });\n        } else {\n            this.loading = false;\n        }\n    }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\n\nimport { LabelMapperComponent } from './label-mapper.component';\nimport { LabelMapperService } from './label-mapper.service';\n\n@NgModule({\n  declarations: [\n    LabelMapperComponent\n  ],\n  imports: [\n    CommonModule\n  ],\n  exports: [\n    LabelMapperComponent\n  ],\n  providers: [\n    LabelMapperService\n  ]\n})\nexport class HelgolandLabelMapperModule { }\n","import { EventEmitter, Input, OnDestroy, OnInit, Output } from '@angular/core';\nimport { InternalDatasetId, InternalIdHandler } from '@helgoland/core';\nimport { LangChangeEvent, TranslateService } from '@ngx-translate/core';\nimport { Subscription } from 'rxjs';\n\n/**\n * Represents an abstract dataset entry for a list, which has the following functions:\n *  - can be selected and is selectable internally, with a corresponding output event\n *  - can be deleted, which also triggers an output event\n *  - translatable, so it triggers the methode onLanguageChanged when the language is switched\n */\nexport abstract class ListEntryComponent implements OnInit, OnDestroy {\n\n    @Input()\n    public datasetId: string;\n\n    @Input()\n    public selected: boolean;\n\n    @Output()\n    public onDeleteDataset: EventEmitter<boolean> = new EventEmitter();\n\n    @Output()\n    public onSelectDataset: EventEmitter<boolean> = new EventEmitter();\n\n    public loading;\n\n    protected internalId: InternalDatasetId;\n\n    private langChangeSubscription: Subscription;\n\n    constructor(\n        protected internalIdHandler: InternalIdHandler,\n        protected translateSrvc: TranslateService\n    ) { }\n\n    public ngOnInit(): void {\n        if (this.datasetId) {\n            this.internalId = this.internalIdHandler.resolveInternalId(this.datasetId);\n            this.loadDataset(this.translateSrvc.currentLang);\n        }\n        this.langChangeSubscription = this.translateSrvc.onLangChange.subscribe((langChangeEvent: LangChangeEvent) => this.onLanguageChanged(langChangeEvent));\n    }\n\n    public ngOnDestroy(): void {\n        this.langChangeSubscription.unsubscribe();\n    }\n\n    public removeDataset() {\n        this.onDeleteDataset.emit(true);\n    }\n\n    public toggleSelection() {\n        this.selected = !this.selected;\n        this.onSelectDataset.emit(this.selected);\n    }\n\n    protected onLanguageChanged(langChangeEvent: LangChangeEvent): void {\n        if (this.internalId) {\n            this.loadDataset(langChangeEvent.lang);\n        }\n    }\n\n    protected abstract loadDataset(lang?: string): void;\n\n}\n","import { Component, EventEmitter, Input, Output } from '@angular/core';\nimport {\n    Dataset,\n    DatasetApiInterface,\n    InternalIdHandler,\n    LocatedProfileDataEntry,\n    ParameterFilter,\n    PlatformTypes,\n    TimedDatasetOptions,\n    Timespan,\n} from '@helgoland/core';\nimport { TranslateService } from '@ngx-translate/core';\n\nimport { ListEntryComponent } from '../list-entry.component';\n\n@Component({\n    selector: 'n52-profile-entry',\n    template: `<div class=\"legendItem\" style=\"position: relative;\" [ngClass]=\"{'selected': selected}\" (click)=\"toggleSelection()\">\n  <div class=\"legendItemheader\">\n    <div class=\"legendItemLabel\">\n      <n52-label-mapper label=\"{{dataset?.parameters.platform.label}}\"></n52-label-mapper>\n    </div>\n    <div class=\"small\">\n      <n52-label-mapper label=\"{{dataset?.parameters.phenomenon.label}}\"></n52-label-mapper>\n      <span *ngIf=\"dataset?.uom\">[\n        <n52-label-mapper label=\"{{dataset.uom}}\"></n52-label-mapper>]</span>\n    </div>\n    <div class=\"small\">\n      <n52-label-mapper label=\"{{dataset?.parameters.procedure.label}}\"></n52-label-mapper>\n    </div>\n    <div class=\"small\" *ngIf=\"dataset?.parameters.category.label != dataset?.parameters.phenomenon.label\">\n      <n52-label-mapper label=\"{{dataset?.parameters.category.label}}\"></n52-label-mapper>\n    </div>\n  </div>\n  <div *ngFor=\"let item of datasetOptions\">\n    <div>\n      <span [ngStyle]=\"{'color': item.color}\">{{item.timestamp | date: 'short'}}</span>\n      <span class=\"fa\" [ngClass]=\"{'fa-eye-slash': item.visible, 'fa-eye': !item.visible}\" (click)=\"toggleVisibility(item); $event.stopPropagation();\"\n        title=\"{{'profiles.legend.visibility' | translate}}\"></span>\n      <span class=\"fa fa-pencil\" (click)=\"editDatasetOptions(item); $event.stopPropagation();\" [ngStyle]=\"{color: item.color}\"\n        title=\"{{'profiles.legend.edit-style' | translate}}\"></span>\n      <span class=\"fa fa-map-marker\" (click)=\"showGeometry(item); $event.stopPropagation();\" title=\"{{'profiles.legend.show-geometry' | translate}}\"></span>\n      <span class=\"fa fa-times\" (click)=\"removeDatasetOptions(item); $event.stopPropagation();\" title=\"{{'profiles.legend.delete-subentry' | translate}}\"></span>\n    </div>\n    <div (click)=\"openInCombiView(item); $event.stopPropagation();\" *ngIf=\"isMobile()\" class=\"toCombiView\">\n      <span class=\"fa fa-arrow-right\"></span>\n      <span>{{'profiles.legend.go-to-combi-view' | translate}}</span>\n    </div>\n  </div>\n</div>\n`,\n    styles: [`:host .legendItem{background-color:#fff;padding:5px;border-radius:5px;margin-bottom:5px}:host .legendItem .small{font-size:90%;word-break:break-all}:host .legendItem.selected{padding:0;border-width:5px;border-style:solid}:host .legendItem .legendItemheader{cursor:pointer}:host .legendItem .toCombiView{cursor:pointer}:host .legendItem .fa{cursor:pointer}`]\n})\nexport class ProfileEntryComponent extends ListEntryComponent {\n\n    @Input()\n    public datasetOptions: TimedDatasetOptions[];\n\n    @Output()\n    public onUpdateOptions: EventEmitter<TimedDatasetOptions[]> = new EventEmitter();\n\n    @Output()\n    public onDeleteDatasetOptions: EventEmitter<TimedDatasetOptions> = new EventEmitter();\n\n    @Output()\n    public onEditOptions: EventEmitter<TimedDatasetOptions> = new EventEmitter();\n\n    @Output()\n    public onOpenInCombiView: EventEmitter<TimedDatasetOptions> = new EventEmitter();\n\n    @Output()\n    public onShowGeometry: EventEmitter<GeoJSON.GeoJsonObject> = new EventEmitter();\n\n    public dataset: Dataset;\n\n    public editableOptions: TimedDatasetOptions;\n    public tempColor: string;\n\n    constructor(\n        protected api: DatasetApiInterface,\n        protected internalIdHandler: InternalIdHandler,\n        protected translateSrvc: TranslateService\n    ) {\n        super(internalIdHandler, translateSrvc);\n    }\n\n    public removeDatasetOptions(options: TimedDatasetOptions) {\n        this.onDeleteDatasetOptions.emit(options);\n    }\n\n    public editDatasetOptions(options: TimedDatasetOptions) {\n        this.onEditOptions.emit(options);\n    }\n\n    public toggleVisibility(options: TimedDatasetOptions) {\n        options.visible = !options.visible;\n        this.onUpdateOptions.emit(this.datasetOptions);\n    }\n\n    public isMobile() {\n        if (this.dataset) {\n            return this.dataset.platformType === PlatformTypes.mobileInsitu;\n        }\n        return false;\n    }\n\n    public openInCombiView(option: TimedDatasetOptions) {\n        this.onOpenInCombiView.emit(option);\n    }\n\n    public showGeometry(option: TimedDatasetOptions) {\n        const internalId = this.internalIdHandler.resolveInternalId(this.datasetId);\n        if (this.isMobile()) {\n            const timespan = new Timespan(option.timestamp);\n            this.api.getData<LocatedProfileDataEntry>(internalId.id, internalId.url, timespan).subscribe((result) => {\n                if (result.values.length === 1) {\n                    this.onShowGeometry.emit(result.values[0].geometry);\n                }\n            });\n        } else {\n            this.api.getPlatform(this.dataset.parameters.platform.id, internalId.url).subscribe((platform) => {\n                this.onShowGeometry.emit(platform.geometry);\n            });\n        }\n    }\n\n    protected loadDataset(lang?: string) {\n        const params: ParameterFilter = {};\n        if (lang) { params.lang = lang; }\n        this.loading = true;\n        this.api.getDataset(this.internalId.id, this.internalId.url, params).subscribe((dataset) => {\n            this.dataset = dataset;\n            this.loading = false;\n        });\n    }\n\n}\n","import { Component } from '@angular/core';\nimport { Dataset, DatasetApiInterface, IDataset, InternalIdHandler, ParameterFilter, Timeseries } from '@helgoland/core';\nimport { TranslateService } from '@ngx-translate/core';\n\nimport { ListEntryComponent } from '../../list-entry.component';\n\n/**\n * Implements the abstract ListEntryComponent, which has the following functions:\n *  - can be selected and is selectable internally, with a corresponding output event\n *  - can be deleted, which also triggers an output event\n *  - translatable, so it triggers the methode onLanguageChanged when the language is switched\n */\n@Component({\n  selector: 'n52-simple-timeseries-entry',\n  template: `<span>Platform: {{platformLabel}}</span>\n<span>Phenomenon: {{phenomenonLabel}}</span>\n<span>Procedure: {{procedureLabel}}</span>\n<span>Category: {{categoryLabel}}</span>\n<span>Uom: {{uom}}</span>\n<button (click)=\"toggleSelection()\">select</button>\n<button (click)=\"removeDataset()\">remove</button>`,\n  styles: [``]\n})\nexport class SimpleTimeseriesEntryComponent extends ListEntryComponent {\n\n  public dataset: IDataset;\n\n  public platformLabel: string;\n  public phenomenonLabel: string;\n  public procedureLabel: string;\n  public categoryLabel: string;\n  public uom: string;\n\n  constructor(\n    protected api: DatasetApiInterface,\n    protected internalIdHandler: InternalIdHandler,\n    protected translateSrvc: TranslateService\n  ) {\n    super(internalIdHandler, translateSrvc);\n  }\n\n  protected loadDataset(lang?: string): void {\n    const params: ParameterFilter = {};\n    if (lang) { params.lang = lang; }\n    this.loading = true;\n    this.api.getSingleTimeseries(this.internalId.id, this.internalId.url, params)\n      .subscribe(\n        (timeseries) => this.setDataset(timeseries),\n        (error) => {\n          this.api.getDataset(this.internalId.id, this.internalId.url, params).subscribe((dataset) => this.setDataset(dataset));\n        });\n  }\n\n  protected setDataset(timeseries: IDataset) {\n    this.dataset = timeseries;\n    this.setParameters();\n    this.loading = false;\n  }\n\n  protected setParameters() {\n    if (this.dataset instanceof Dataset) {\n      this.platformLabel = this.dataset.parameters.platform.label;\n    } else if (this.dataset instanceof Timeseries) {\n      this.platformLabel = this.dataset.station.properties.label;\n    }\n    this.phenomenonLabel = this.dataset.parameters.phenomenon.label;\n    this.procedureLabel = this.dataset.parameters.procedure.label;\n    this.categoryLabel = this.dataset.parameters.category.label;\n    this.uom = this.dataset.uom;\n  }\n}\n","import { Component, EventEmitter, Input, Output } from '@angular/core';\nimport { Dataset, DatasetApiInterface, DatasetOptions, InternalIdHandler, Timeseries } from '@helgoland/core';\nimport { TranslateService } from '@ngx-translate/core';\n\nimport { SimpleTimeseriesEntryComponent } from '../simple-timeseries-entry/simple-timeseries-entry.component';\n\n/**\n * Extends the SimpleTimeseriesEntryComponent, with the following functions:\n *  - dataset options and triggers the editation of the dataset options\n *  - triggers the show geometry event\n */\n@Component({\n  selector: 'n52-configurable-timeseries-entry',\n  template: `<span>Platform: {{platformLabel}}</span>\n<span>Phenomenon: {{phenomenonLabel}}</span>\n<span>Procedure: {{procedureLabel}}</span>\n<span>Category: {{categoryLabel}}</span>\n<span>Uom: {{uom}}</span>\n<button (click)=\"toggleSelection()\">toggle selection</button>\n<button (click)=\"removeDataset()\">remove</button>\n<button (click)=\"toggleVisibility()\">toggle visibility</button>\n<button (click)=\"editDatasetOptions()\">edit Options</button>\n<button (click)=\"showGeometry()\">show Geometry</button>`,\n  styles: [``]\n})\nexport class ConfigurableTimeseriesEntryComponent extends SimpleTimeseriesEntryComponent {\n\n  @Input()\n  public datasetOptions: DatasetOptions;\n\n  @Input()\n  public highlight: boolean;\n\n  @Output()\n  public onUpdateOptions: EventEmitter<DatasetOptions> = new EventEmitter();\n\n  @Output()\n  public onEditOptions: EventEmitter<DatasetOptions> = new EventEmitter();\n\n  @Output()\n  public onShowGeometry: EventEmitter<GeoJSON.GeoJsonObject> = new EventEmitter();\n\n  constructor(\n    protected api: DatasetApiInterface,\n    protected internalIdHandler: InternalIdHandler,\n    protected translateSrvc: TranslateService\n  ) {\n    super(api, internalIdHandler, translateSrvc);\n  }\n\n  public toggleVisibility() {\n    this.datasetOptions.visible = !this.datasetOptions.visible;\n    this.onUpdateOptions.emit(this.datasetOptions);\n  }\n\n  public editDatasetOptions() {\n    this.onEditOptions.emit(this.datasetOptions);\n  }\n\n  public showGeometry() {\n    if (this.dataset instanceof Timeseries) {\n      this.onShowGeometry.emit(this.dataset.station.geometry);\n    }\n    if (this.dataset instanceof Dataset) {\n      this.api.getPlatform(this.dataset.parameters.platform.id, this.dataset.url).subscribe((platform) => {\n        this.onShowGeometry.emit(platform.geometry);\n      });\n    }\n  }\n\n}\n","import { Component, EventEmitter, Input, OnChanges, Output, SimpleChanges } from '@angular/core';\nimport { DatasetApiInterface, FirstLastValue, InternalIdHandler, Time, TimeInterval } from '@helgoland/core';\nimport { TranslateService } from '@ngx-translate/core';\n\nimport {\n  ConfigurableTimeseriesEntryComponent,\n} from '../configurable-timeseries-entry/configurable-timeseries-entry.component';\n\n/**\n * Extends the ConfigurableTimeseriesEntryComponent, with the following functions:\n *  - first and latest validation\n *  - jump to first and latest value events\n */\n@Component({\n  selector: 'n52-first-latest-timeseries-entry',\n  template: `<span>{{procedureLabel}} - {{platformLabel}}</span>\n<span>Has Data: {{hasData}}</span>\n<button *ngIf=\"firstValue\" (click)=\"jumpToFirstTimeStamp()\">{{firstValue.value}} - {{firstValue.timestamp | date}}</button>\n<button *ngIf=\"lastValue\" (click)=\"jumpToLastTimeStamp()\">{{lastValue.value}} - {{lastValue.timestamp | date}}</button>`,\n  styles: [``]\n})\nexport class FirstLatestTimeseriesEntryComponent extends ConfigurableTimeseriesEntryComponent implements OnChanges {\n\n  @Input()\n  public timeInterval: TimeInterval;\n\n  @Output()\n  public onSelectDate: EventEmitter<Date> = new EventEmitter();\n\n  public firstValue: FirstLastValue;\n  public lastValue: FirstLastValue;\n  public hasData = true;\n\n  constructor(\n    protected api: DatasetApiInterface,\n    protected internalIdHandler: InternalIdHandler,\n    protected translateSrvc: TranslateService,\n    protected timeSrvc: Time\n  ) {\n    super(api, internalIdHandler, translateSrvc);\n  }\n\n  public ngOnChanges(changes: SimpleChanges): void {\n    if (changes.timeInterval) {\n      this.checkDataInTimespan();\n    }\n  }\n\n  public jumpToFirstTimeStamp() {\n    this.onSelectDate.emit(new Date(this.dataset.firstValue.timestamp));\n  }\n\n  public jumpToLastTimeStamp() {\n    this.onSelectDate.emit(new Date(this.dataset.lastValue.timestamp));\n  }\n\n  protected setParameters() {\n    super.setParameters();\n    this.firstValue = this.dataset.firstValue;\n    this.lastValue = this.dataset.lastValue;\n    this.checkDataInTimespan();\n  }\n\n  private checkDataInTimespan() {\n    if (this.timeInterval && this.dataset) {\n      this.hasData = this.timeSrvc.overlaps(\n        this.timeInterval,\n        this.dataset.firstValue.timestamp,\n        this.dataset.lastValue.timestamp\n      );\n    }\n  }\n\n}\n","import { Component, Injectable, OnChanges, ViewEncapsulation } from '@angular/core';\nimport { ColorService, DatasetApiInterface, IdCache, InternalIdHandler, ReferenceValue, Time } from '@helgoland/core';\nimport { TranslateService } from '@ngx-translate/core';\n\nimport {\n    FirstLatestTimeseriesEntryComponent,\n} from '../first-latest-timeseries-entry/first-latest-timeseries-entry.component';\n\n@Injectable()\nexport class ReferenceValueColorCache extends IdCache<{ color: string, visible: boolean }> { }\n\n/**\n * Extends the FirstLatestTimeseriesEntryComponent, with the following functions:\n *  - handles the reference values of the dataset entry\n */\n@Component({\n    selector: 'n52-timeseries-entry',\n    template: `<div class=\"legendItem\" style=\"position: relative;\" [ngStyle]=\"{'border-color': datasetOptions?.color}\" [ngClass]=\"{'selected': selected}\"\n  (click)=\"toggleSelection()\">\n  <div class=\"loading-overlay\" *ngIf=\"loading\" [ngStyle]=\"{'background-color': datasetOptions?.color}\">\n    <div class=\"fa fa-refresh fa-spin fa-3x fa-fw\"></div>\n  </div>\n  <div>\n    <div class=\"legendItemheader\" [ngClass]=\"{'highlight': highlight}\">\n      <div class=\"legendItemLabel\" [ngStyle]=\"{'color': datasetOptions?.color}\">\n        <n52-label-mapper label=\"{{platformLabel}}\"></n52-label-mapper>\n        <!-- <n52-favorite-toggler [dataset]=\"dataset\"></n52-favorite-toggler> -->\n      </div>\n      <div class=\"noDataWarning firstLastEntry\" *ngIf=\"!hasData\">\n        <div>\n          <span class=\"fa fa-exclamation-triangle red\"></span>\n          <span class=\"small-label\">Keine Daten verfÃ¼gbar</span>\n        </div>\n        <div class=\"additionalLegendEntry\" (click)=\"jumpToLastTimeStamp(); $event.stopPropagation();\">\n          <span class=\"fa fa-chevron-right\"></span>\n          <span class=\"small-label\">Springe zur letzten Messung</span>\n        </div>\n      </div>\n      <div class=\"small-label\">\n        <n52-label-mapper label=\"{{phenomenonLabel}}\"></n52-label-mapper>\n        <span *ngIf=\"uom\">\n          <span>[</span>\n          <n52-label-mapper label=\"{{uom}}\"></n52-label-mapper>\n          <span>]</span>\n        </span>\n      </div>\n      <div class=\"small-label\">\n        <n52-label-mapper label=\"{{procedureLabel}}\"></n52-label-mapper>\n      </div>\n      <div class=\"small-label\" *ngIf=\"categoryLabel != phenomenonLabel\">\n        <n52-label-mapper label=\"{{categoryLabel}}\"></n52-label-mapper>\n      </div>\n    </div>\n    <div class=\"legendicons\">\n      <span class=\"fa\" [ngClass]=\"{'fa-chevron-down': !informationVisible, 'fa-chevron-up': informationVisible}\" (click)=\"toggleInformation(); $event.stopPropagation();\"></span>\n      <span class=\"fa\" [ngClass]=\"{'fa-eye-slash': datasetOptions?.visible, 'fa-eye': !datasetOptions?.visible}\" (click)=\"toggleVisibility(); $event.stopPropagation();\"></span>\n      <span class=\"fa fa-map-marker\" (click)=\"showGeometry(); $event.stopPropagation();\"></span>\n      <span class=\"fa fa-pencil\" (click)=\"editDatasetOptions(); $event.stopPropagation();\" [ngStyle]=\"{color: datasetOptions?.color}\"></span>\n      <span class=\"fa fa-times\" (click)=\"removeDataset(); $event.stopPropagation();\"></span>\n    </div>\n    <div class=\"collapseLegendEntry small-label\" *ngIf=\"informationVisible\">\n      <div class=\"firstLastEntry additionalLegendEntry\" *ngIf=\"firstValue\" (click)=\"jumpToFirstTimeStamp(); $event.stopPropagation();\">\n        <span class=\"fa fa-chevron-right\"></span>\n        <span>Erster Wert bei</span>\n        <span>{{firstValue.timestamp| date: 'short'}}</span>\n        <span class=\"hidden-medium\">({{firstValue.value}} {{uom}})</span>\n      </div>\n      <div class=\"firstLastEntry additionalLegendEntry\" *ngIf=\"lastValue\" (click)=\"jumpToLastTimeStamp(); $event.stopPropagation();\">\n        <span class=\"fa fa-chevron-right\"></span>\n        <span>Letzter Wert bei</span>\n        <span>{{lastValue.timestamp| date: 'short'}}</span>\n        <span class=\"hidden-medium\">({{lastValue.value}} {{uom}})</span>\n      </div>\n      <div *ngIf=\"dataset?.referenceValues\">\n        <div class=\"additionalLegendEntry\" *ngFor=\"let ref of dataset.referenceValues\" (click)=\"toggleReferenceValue(ref); $event.stopPropagation();\"\n          [ngClass]=\"{'selected': ref.visible}\" [ngStyle]=\"{color: ref.color}\">\n          <span class=\"fa fa-chevron-right\"></span>\n          <span>{{ref.label}}</span>\n        </div>\n      </div>\n      <!-- <div class=\"additionalLegendEntry\" ng-click=\"$event.stopPropagation(); createExportCsv(timeseries)\">\n                <span class=\"glyphicon glyphicon-download\"></span>\n                <span translate=\"export.label\"></span>\n            </div> -->\n      <!-- <div class=\"additionalLegendEntry\">\n                <swc-procedure-metadata timeseries='timeseries'></swc-procedure-metadata>\n                <swc-timeseries-raw-data-output timeseries='timeseries'></swc-timeseries-raw-data-output>\n                <swc-sos-url timeseries='timeseries'></swc-sos-url>\n            </div> -->\n    </div>\n  </div>\n</div>`,\n    styles: [`.geometryViewerModal .modal-body{height:50vh}n52-timeseries-entry .legendItem{background-color:#fff;padding:5px;border-radius:5px;margin-bottom:5px}n52-timeseries-entry .legendItem .small-label{font-size:90%;word-break:break-all}n52-timeseries-entry .legendItem.selected{padding:0;border-width:5px;border-style:solid}n52-timeseries-entry .legendItem .legendItemheader{cursor:pointer}n52-timeseries-entry .legendItem .legendItemheader.highlight{font-weight:700}n52-timeseries-entry .legendItem .legendicons span{margin:0 4%;font-size:150%}n52-timeseries-entry .legendItem .legendicons span:hover{cursor:pointer}n52-timeseries-entry .legendItem .legendicons .delete{z-index:5}n52-timeseries-entry .legendItem .noDataWarning{border:2px solid red;border-radius:5px;padding:3px}n52-timeseries-entry .legendItem .noDataWarning .red{color:red}n52-timeseries-entry .legendItem .additionalLegendEntry:hover{cursor:pointer}n52-timeseries-entry .legendItem .additionalLegendEntry.selected{font-weight:bolder}n52-timeseries-entry .legendItem .refEntry.selected{border-style:solid;border-width:2px;border-radius:2px;margin:2px 0}n52-timeseries-entry .legendItem .loading-overlay{width:100%;height:100%;position:absolute;top:0;left:0;opacity:.5;z-index:1;display:flex;justify-content:center;align-items:center}n52-timeseries-entry .legendItem .loading-overlay .fa-spin{color:#fff;font-size:25px;width:25px;height:25px}`],\n    encapsulation: ViewEncapsulation.None\n})\nexport class TimeseriesEntryComponent extends FirstLatestTimeseriesEntryComponent implements OnChanges {\n\n    public informationVisible = false;\n    public referenceValues: ReferenceValue[];\n\n    constructor(\n        protected api: DatasetApiInterface,\n        protected timeSrvc: Time,\n        protected internalIdHandler: InternalIdHandler,\n        protected color: ColorService,\n        protected refValCache: ReferenceValueColorCache,\n        protected translateSrvc: TranslateService\n    ) {\n        super(api, internalIdHandler, translateSrvc, timeSrvc);\n    }\n\n    public toggleInformation() {\n        this.informationVisible = !this.informationVisible;\n    }\n\n    public toggleReferenceValue(refValue: ReferenceValue) {\n        const idx = this.datasetOptions.showReferenceValues.findIndex((entry) => entry.id === refValue.referenceValueId);\n        const refValId = this.createRefValId(refValue.referenceValueId);\n        if (idx > -1) {\n            refValue.visible = false;\n            this.datasetOptions.showReferenceValues.splice(idx, 1);\n        } else {\n            refValue.visible = true;\n            this.datasetOptions.showReferenceValues.push({ id: refValue.referenceValueId, color: refValue.color });\n        }\n        this.refValCache.get(refValId).visible = refValue.visible;\n        this.onUpdateOptions.emit(this.datasetOptions);\n    }\n\n    protected setParameters() {\n        super.setParameters();\n        if (this.dataset.referenceValues) {\n            this.dataset.referenceValues.forEach((e) => {\n                const refValId = this.createRefValId(e.referenceValueId);\n                const refValOption = this.datasetOptions.showReferenceValues.find((o) => o.id === e.referenceValueId);\n                if (refValOption) {\n                    this.refValCache.set(refValId, {\n                        color: refValOption.color,\n                        visible: true\n                    });\n                }\n                if (!this.refValCache.has(refValId)) {\n                    this.refValCache.set(refValId, {\n                        color: this.color.getColor(),\n                        visible: false\n                    });\n                }\n                e.color = this.refValCache.get(refValId).color;\n                e.visible = this.refValCache.get(refValId).visible;\n            });\n        }\n    }\n\n    private createRefValId(refId: string) {\n        return this.dataset.url + refId;\n    }\n\n}\n","import { Component, EventEmitter, Input, Output } from '@angular/core';\nimport { Dataset, DatasetApiInterface, DatasetOptions, InternalIdHandler, ParameterFilter } from '@helgoland/core';\nimport { TranslateService } from '@ngx-translate/core';\n\nimport { ListEntryComponent } from '../list-entry.component';\n\n@Component({\n    selector: 'n52-trajectory-entry',\n    template: `<div style=\"white-space: nowrap;\" (click)=\"toggleVisibility()\">\n  <span>\n    <a class=\"btn btn-light\">\n      <span class=\"fa fa-plus\" [ngClass]=\"{'fa-eye': !datasetOptions?.visible, 'fa-eye-slash': datasetOptions?.visible}\"></span>\n    </a>\n  </span>\n  <span style=\"padding-left: 10px;\" [ngStyle]=\"{'color': datasetOptions?.color}\">{{dataset?.parameters.phenomenon.label}}</span>\n  <span class=\"fa fa-pencil\" (click)=\"editDatasetOptions(datasetOptions); $event.stopPropagation();\" [ngStyle]=\"{color: datasetOptions?.color}\"></span>\n</div>`\n})\nexport class TrajectoryEntryComponent extends ListEntryComponent {\n\n    @Input()\n    public datasetOptions: DatasetOptions;\n\n    @Output()\n    public onUpdateOptions: EventEmitter<DatasetOptions> = new EventEmitter();\n\n    @Output()\n    public onEditOptions: EventEmitter<DatasetOptions> = new EventEmitter();\n\n    public dataset: Dataset;\n\n    public tempColor: string;\n\n    constructor(\n        protected api: DatasetApiInterface,\n        protected internalIdHandler: InternalIdHandler,\n        protected translateSrvc: TranslateService\n    ) {\n        super(internalIdHandler, translateSrvc);\n    }\n\n    public toggleVisibility() {\n        this.datasetOptions.visible = !this.datasetOptions.visible;\n        this.onUpdateOptions.emit(this.datasetOptions);\n    }\n\n    public editDatasetOptions(options: DatasetOptions) {\n        this.onEditOptions.emit(options);\n    }\n\n    protected loadDataset(lang?: string): void {\n        const params: ParameterFilter = {};\n        if (lang) { params.lang = lang; }\n        this.loading = true;\n        this.api.getDataset(this.internalId.id, this.internalId.url, params).subscribe((dataset) => {\n            this.dataset = dataset;\n            this.loading = false;\n        });\n    }\n\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { HelgolandCoreModule } from '@helgoland/core';\nimport { TranslateModule } from '@ngx-translate/core';\n\nimport { HelgolandLabelMapperModule } from '../label-mapper/label-mapper.module';\nimport { ProfileEntryComponent } from './profile-entry/profile-entry.component';\nimport {\n  ConfigurableTimeseriesEntryComponent,\n} from './timeseries/configurable-timeseries-entry/configurable-timeseries-entry.component';\nimport {\n  FirstLatestTimeseriesEntryComponent,\n} from './timeseries/first-latest-timeseries-entry/first-latest-timeseries-entry.component';\nimport { SimpleTimeseriesEntryComponent } from './timeseries/simple-timeseries-entry/simple-timeseries-entry.component';\nimport {\n  ReferenceValueColorCache,\n  TimeseriesEntryComponent,\n} from './timeseries/timeseries-entry/timeseries-entry.component';\nimport { TrajectoryEntryComponent } from './trajectory-entry/trajectory-entry.component';\n\nconst COMPONENTS = [\n  TimeseriesEntryComponent,\n  ConfigurableTimeseriesEntryComponent,\n  SimpleTimeseriesEntryComponent,\n  FirstLatestTimeseriesEntryComponent,\n  ProfileEntryComponent,\n  TrajectoryEntryComponent\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    TranslateModule,\n    HelgolandCoreModule,\n    HelgolandLabelMapperModule,\n    FormsModule\n  ],\n  declarations: [\n    COMPONENTS\n  ],\n  exports: [\n    COMPONENTS\n  ],\n  providers: [\n    ReferenceValueColorCache\n  ]\n})\nexport class HelgolandDatasetlistModule {\n}\n","import { Component, IterableDiffers, OnInit } from '@angular/core';\nimport {\n  DatasetApiInterface,\n  DatasetOptions,\n  DatasetPresenterComponent,\n  DatasetTableData,\n  InternalIdHandler,\n  Time,\n  Timeseries,\n} from '@helgoland/core';\nimport { LangChangeEvent, TranslateService } from '@ngx-translate/core';\n\n@Component({\n  selector: 'n52-dataset-table',\n  template: `<table *ngIf=\"ready\">\n  <thead>\n    <tr>\n      <th (click)=\"sort($event)\" [attr.data-column-id]=\"'datetime'\" class=\"sorted-asc\">\n        Zeit\n      </th>\n      <th *ngFor=\"let series of this.timeseriesArray; let i = index\" (click)=\"sort($event)\" [attr.data-column-id]=\"i\" [ngStyle]=\"{ 'border-color': preparedColors[i] }\">\n        {{series?.label}} [{{series?.uom}}]\n      </th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr *ngFor=\"let row of this.preparedData\">\n      <td>{{row.datetime | date: 'short'}}</td>\n      <td *ngFor=\"let value of row.values\">{{value}}</td>\n    </tr>\n  </tbody>\n</table>\n`,\n  styles: [`:host{flex:1;overflow-y:scroll;overflow-x:hidden}:host tbody,:host thead tr{display:table;table-layout:fixed;width:100%}:host table{display:block;border-collapse:separate;border-spacing:0 1px}:host thead{display:block;position:-webkit-sticky;position:sticky;top:0;border-spacing:0}:host tr:nth-child(2n){background-color:#eee}:host th{background-color:#a9a9a9;cursor:pointer;border-bottom-width:7px;border-bottom-style:solid;overflow-wrap:break-word}:host th:first-child{border-bottom-color:#a9a9a9}:host th:first-child.sorted-asc,:host th:first-child.sorted-desc{border-bottom-color:#555}:host th.sorted-asc,:host th.sorted-desc{background-color:#555;color:#fff}:host th.sorted-asc:after{content:\"\\\\25B4\";float:right}:host th.sorted-desc:after{content:\"\\\\25BE\";float:right}:host td{white-space:nowrap;border-bottom:1px solid gray}:host td,:host th{padding:5px 10px}`]\n})\nexport class DatasetTableComponent extends DatasetPresenterComponent<DatasetOptions, any> implements OnInit {\n  /*\n    The component extends DatasetGraphComponent, but implements only parts of that components inputs and outputs.\n    Implemented: datasetIds, timeInterval, selectedDatasetIds and datasetOptions inputs; no outputs\n    Not implemented: graphOptions input; all outputs (onDatasetSelected, onTimespanChanged, onMessageThrown, onLoading)\n  */\n\n  public preparedData: DatasetTableData[] = Array();\n  public preparedColors: string[] = Array();\n  public ready = false;\n\n  public timeseriesArray: Timeseries[] = new Array();\n  private additionalStylesheet: HTMLElement;\n\n  constructor(\n    protected iterableDiffers: IterableDiffers,\n    protected api: DatasetApiInterface,\n    protected datasetIdResolver: InternalIdHandler,\n    protected timeSrvc: Time,\n    protected translateSrvc: TranslateService\n  ) {\n    super(iterableDiffers, api, datasetIdResolver, timeSrvc, translateSrvc);\n  }\n\n  public ngOnInit() {\n    this.additionalStylesheet = document.getElementById('selectedIdsStylesheet');\n    if (!this.additionalStylesheet) {\n      this.additionalStylesheet = document.createElement('style');\n      this.additionalStylesheet.id = 'selectedIdsStylesheet';\n      document.body.appendChild(this.additionalStylesheet);\n    }\n  }\n\n  /* called when user clicks on table headers */\n  public sort(event: any) {\n    // can be 'datetime' or an integer indicating the index of the column in the values array\n    const by = event.target.dataset.columnId;\n    const direction = event.target.classList.contains('sorted-asc') ? 'desc' : 'asc';\n    const directionNumber = (direction === 'asc' ? 1 : -1);\n\n    // set CSS classes\n    Array.from(event.target.parentElement.children).forEach((child: Element) => child.className = '');\n    if (direction === 'asc') {\n      (event.target as Element).classList.add('sorted-asc');\n    } else {\n      (event.target as Element).classList.add('sorted-desc');\n    }\n\n    // define correct callback function for sort method\n    let sortCallback;\n    if (by === 'datetime') {\n      sortCallback = (e1: any, e2: any) => directionNumber * (e1.datetime - e2.datetime);\n    } else {\n      const index = parseInt(by, 10);\n      // basically the same as above, but take care of 'undefined' values\n      sortCallback = (e1: any, e2: any) =>\n        (e1.values[index] === undefined ? 1 :\n          (e2.values[index] === undefined ? -1 :\n            (directionNumber * (e1.values[index] - e2.values[index]))\n          )\n        );\n    }\n\n    // do the sort\n    this.preparedData = this.preparedData.sort(sortCallback);\n  }\n\n  protected onLanguageChanged(langChangeEvent: LangChangeEvent): void { }\n\n  public reloadDataForDatasets(datasetIds: string[]): void {\n    // console.log('reload data at ' + new Date());\n  }\n\n  protected presenterOptionsChanged(options: any) {\n    // only included because it's required by abstract parent class (wouldn't compile without)\n    // no point in implementing this method in a non-graphing component\n  }\n\n  protected getIndexFromInternalId(internalId: string) {\n    // helper method\n    return this.datasetIds.indexOf(internalId);\n  }\n\n  protected setSelectedId(internalId: string) {\n    // quite fairly tested\n    const rules = this.additionalStylesheet.innerHTML.split('\\r\\n');\n    const index = this.getIndexFromInternalId(internalId);\n    rules[index] = 'td:nth-child(' + (index + 2) + ') {font-weight: bold}';\n    this.additionalStylesheet.innerHTML = rules.join('\\r\\n');\n  }\n\n  protected removeSelectedId(internalId: string) {\n    // fairly tested\n    const rules = this.additionalStylesheet.innerHTML.split('\\r\\n');\n    const index = this.getIndexFromInternalId(internalId);\n    rules[index] = '';\n    this.additionalStylesheet.innerHTML = rules.join('\\r\\n');\n  }\n\n  protected timeIntervalChanges() {\n    // the easiest method: delete everything and build preparedData from scratch.\n    this.preparedData = [];\n    this.timeseriesArray.forEach((timeseries) => this.loadTsData(timeseries));\n  }\n\n  protected removeDataset(internalId: string) {\n    // fairly tested\n    const index = this.getIndexFromInternalId(internalId);\n\n    // remove entries of this dataset in each datetime's `values` arrays\n    this.preparedData.forEach((e) => e.values.splice(index, 1));\n    // if a datetime became completely empty (i.e. there's only `undefined`s in the `values` array, delete this datetime)\n    this.preparedData = this.preparedData.filter((e) => e.values.reduce((a, c) => a || c, undefined) !== undefined);\n\n    this.preparedColors.splice(index, 1);\n\n    const rules = this.additionalStylesheet.innerHTML.split('\\r\\n');\n    rules.splice(index, 1);\n    this.additionalStylesheet.innerHTML = rules.join('\\r\\n');\n\n    this.timeseriesArray.splice(index, 1);\n  }\n\n  protected addDataset(internalId: string, url: string): void {\n    this.timeseriesArray.length += 1;  // create new empty slot\n    this.preparedColors.push('darkgrey');\n    this.additionalStylesheet.innerHTML += '\\r\\n';\n    this.api.getSingleTimeseries(internalId, url)\n      .subscribe((timeseries: Timeseries) => this.addTimeseries(timeseries));\n  }\n\n  protected datasetOptionsChanged(internalId: string, options: DatasetOptions): void {\n    if (this.timeseriesArray.some((e) => e !== undefined && e.internalId === internalId)) {\n      const index = this.getIndexFromInternalId(internalId);\n      this.preparedColors[index] = options.color;\n      // TODO-CF: Page isn't refreshed instantly, but only after the next sort (or possible other actions as well)\n    }\n  }\n\n  protected onResize(): void {\n    // TODO-CF: needed???? probably not\n  }\n\n  private addTimeseries(timeseries: Timeseries) {\n    this.timeseriesArray[this.getIndexFromInternalId(timeseries.internalId)] = timeseries;\n    this.loadTsData(timeseries);\n  }\n\n  private loadTsData(timeseries: Timeseries) {\n    if (this.timespan) {\n      // const datasetOptions = this.datasetOptions.get(timeseries.internalId);\n      this.api.getTsData<[number, number]>(timeseries.id, timeseries.url, this.timespan, { format: 'flot' })\n        .subscribe((result) => {\n          // bring result into Array<DatasetTableData> format and pass to prepareData\n          // convention for layout of newdata argument: see 3-line-comment in prepareData function\n          const index = this.getIndexFromInternalId(timeseries.internalId);\n          this.prepareData(timeseries, result.values.map((e) => {\n            const a = new Array(this.datasetIds.length).fill(undefined);\n            a[index] = e[1];\n            return { datetime: e[0], values: a };\n          }));\n        });\n    }\n  }\n\n  private prepareData(timeseries: Timeseries, newdata: DatasetTableData[]) {\n    const index = this.getIndexFromInternalId(timeseries.internalId);\n\n    // if datasetOptions are provided, use their color to style the header's \"color band\" (i.e. the 7px border-bottom of th)\n    if (this.datasetOptions) {\n      const datasetOptions = this.datasetOptions.get(timeseries.internalId);\n      this.preparedColors[index] = datasetOptions.color;\n    } else {\n      // when no color is specified: make border transparent so the header's background color is used for the color band, too\n      this.preparedColors[index] = 'rgba(0,0,0,0)';\n    }\n\n    if (this.selectedDatasetIds.indexOf(timeseries.internalId) !== -1) {\n      this.setSelectedId(timeseries.internalId);\n    }\n\n    // `newdata` is expected in exactly the same format `preparedData` would look like if that timeseries was the only one\n    // to actually have data (i.e. `values` has the length of timeseriesArray, but all slots are `undefined`, except for\n    // the slot that corresponds to that timeseries)\n\n    // `timeseries` is first timeseries added -> no other `preparedData` to merge with\n    if (this.preparedData.length === 0) {\n      // set newdata as preparedData (as per above)\n      this.preparedData = newdata;\n\n      // `timeseries` is not the first timeseries added -> we have to merge `newdata` into the existing `preparedData`\n    } else {\n      let i = 0;  // loop variable for `preparedData`\n      let j = 0;  // loop variable for `newdata`\n\n      // go through all data points in `newdata`\n      while (j < newdata.length) {\n\n        // timestamps match\n        if (this.preparedData[i] && this.preparedData[i].datetime === newdata[j].datetime) {\n          // just add `newdata`'s value to the existing `values` array in `preparedData`\n          this.preparedData[i].values[index] = newdata[j].values[index];\n          // increment both\n          i++;\n          j++;\n\n          // `newdata` is ahead of `preparedData`\n        } else if (this.preparedData[i] && this.preparedData[i].datetime < newdata[j].datetime) {\n          // do nothing because there's already an undefined there\n          // give preparedData the chance to catch up with newdata\n          i++;\n\n          // `preparedData` is ahead of `newdata`\n        } else {\n          // the current `newdata` is the first dataset that has this datetime -> add it to the preparedData array\n          this.preparedData.splice(i, 0, newdata[j]);\n          // give newdata the chance to catch up with preparedData\n          j++;\n          // but preparedData is 1 longer now, too\n          i++;\n        }\n      }\n    }\n\n    this.ready = this.timeseriesArray.every((e) => e !== undefined);\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { HelgolandCoreModule } from '@helgoland/core';\nimport { TranslateModule } from '@ngx-translate/core';\n\nimport { DatasetTableComponent } from './dataset-table.component';\n\n@NgModule({\n    declarations: [\n        DatasetTableComponent\n    ],\n    imports: [\n        CommonModule,\n        TranslateModule,\n        HelgolandCoreModule\n    ],\n    exports: [\n        DatasetTableComponent\n    ],\n    providers: [\n    ]\n})\nexport class HelgolandDatasetTableModule { }\n"],"names":[],"mappings":"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"}
