/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
import 'bootstrap-slider';
import { Component, EventEmitter, Input, Output, ViewEncapsulation } from '@angular/core';
import { Timespan } from '@helgoland/core';
import { TimeRangeSliderCache } from './time-range-slider.service';
import jquery from 'jquery';
var TimeRangeSliderComponent = /** @class */ (function () {
    function TimeRangeSliderComponent(cache) {
        this.cache = cache;
        this.id = '';
        this.onTimespanSelected = new EventEmitter();
    }
    /**
     * @param {?} changes
     * @return {?}
     */
    TimeRangeSliderComponent.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        var _this = this;
        if (changes["timeList"] && this.timeList) {
            /** @type {?} */
            var min = void 0;
            /** @type {?} */
            var max = void 0;
            this.start = min = this.timeList[0];
            this.end = max = this.timeList[this.timeList.length - 1];
            if (this.id && this.cache.has(this.id)) {
                this.selectionStart = this.cache.get(this.id).from;
                this.selectionEnd = this.cache.get(this.id).to;
            }
            else {
                this.selectionStart = this.start;
                this.selectionEnd = this.end;
            }
            jquery('#slider').slider({
                tooltip: 'hide',
                min: min,
                max: max,
                value: [this.selectionStart, this.selectionEnd]
            }).on('slideStop', function (event) {
                /** @type {?} */
                var timespan = new Timespan(event.value[0], event.value[1]);
                _this.cache.set(_this.id, timespan);
                _this.onTimespanSelected.emit(timespan);
            }).on('slide', function (event) {
                _this.selectionStart = event.value[0];
                _this.selectionEnd = event.value[1];
            });
        }
    };
    TimeRangeSliderComponent.decorators = [
        { type: Component, args: [{
                    selector: 'n52-time-range-slider',
                    template: "<div class=\"time-range-slider\" [hidden]=\"!timeList\">\n  <div class=\"slider-container\">\n    <div class=\"left-start\">\n      <span>{{start | date : 'short'}}</span>\n    </div>\n    <div class=\"center\">\n      <input id=\"slider\" type=\"text\" />\n    </div>\n    <div class=\"right-end\">\n      <span>{{end | date : 'short'}}</span>\n    </div>\n  </div>\n  <div class=\"selection\" *ngIf=\"selectionStart\">\n    <span>{{selectionStart | date : 'short'}}</span>\n    <span> - </span>\n    <span>{{selectionEnd | date : 'short'}}</span>\n  </div>\n</div>\n",
                    styles: ["n52-time-range-slider-selector .time-range-slider{width:100%}n52-time-range-slider-selector .time-range-slider .slider-container{display:flex;display:-webkit-flex}n52-time-range-slider-selector .time-range-slider .left-start,n52-time-range-slider-selector .time-range-slider .right-end{width:150px;padding:0 15px}n52-time-range-slider-selector .time-range-slider .left-start{text-align:right}n52-time-range-slider-selector .time-range-slider .center{flex:1}n52-time-range-slider-selector .time-range-slider .center .slider{width:100%}n52-time-range-slider-selector .time-range-slider .selection{text-align:center}", "/*! =======================================================\n                      VERSION  9.9.0              \n========================================================= *//*! =========================================================\n * bootstrap-slider.js\n *\n * Maintainers:\n *\t\tKyle Kemp\n *\t\t\t- Twitter: @seiyria\n *\t\t\t- Github:  seiyria\n *\t\tRohit Kalkur\n *\t\t\t- Twitter: @Rovolutionary\n *\t\t\t- Github:  rovolution\n *\n * =========================================================\n  *\n * bootstrap-slider is released under the MIT License\n * Copyright (c) 2017 Kyle Kemp, Rohit Kalkur, and contributors\n * \n * Permission is hereby granted, free of charge, to any person\n * obtaining a copy of this software and associated documentation\n * files (the \"Software\"), to deal in the Software without\n * restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following\n * conditions:\n * \n * The above copyright notice and this permission notice shall be\n * included in all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n * OTHER DEALINGS IN THE SOFTWARE.\n *\n * ========================================================= */.slider{display:inline-block;vertical-align:middle;position:relative}.slider.slider-horizontal{width:210px;height:20px}.slider.slider-horizontal .slider-track{height:10px;width:100%;margin-top:-5px;top:50%;left:0}.slider.slider-horizontal .slider-selection,.slider.slider-horizontal .slider-track-high,.slider.slider-horizontal .slider-track-low{height:100%;top:0;bottom:0}.slider.slider-horizontal .slider-handle,.slider.slider-horizontal .slider-tick{margin-left:-10px}.slider.slider-horizontal .slider-handle.triangle,.slider.slider-horizontal .slider-tick.triangle{position:relative;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);border-width:0 10px 10px;width:0;height:0;border-bottom-color:#2e6da4;margin-top:0}.slider.slider-horizontal .slider-tick-container{white-space:nowrap;position:absolute;top:0;left:0;width:100%}.slider.slider-horizontal .slider-tick-label-container{white-space:nowrap;margin-top:20px}.slider.slider-horizontal .slider-tick-label-container .slider-tick-label{padding-top:4px;display:inline-block;text-align:center}.slider.slider-horizontal.slider-rtl .slider-track{left:initial;right:0}.slider.slider-horizontal.slider-rtl .slider-handle,.slider.slider-horizontal.slider-rtl .slider-tick{margin-left:initial;margin-right:-10px}.slider.slider-horizontal.slider-rtl .slider-tick-container{left:initial;right:0}.slider.slider-vertical{height:210px;width:20px}.slider.slider-vertical .slider-track{width:10px;height:100%;left:25%;top:0}.slider.slider-vertical .slider-selection{width:100%;left:0;top:0;bottom:0}.slider.slider-vertical .slider-track-high,.slider.slider-vertical .slider-track-low{width:100%;left:0;right:0}.slider.slider-vertical .slider-handle,.slider.slider-vertical .slider-tick{margin-top:-10px}.slider.slider-vertical .slider-handle.triangle,.slider.slider-vertical .slider-tick.triangle{border-width:10px 0 10px 10px;width:1px;height:1px;border-left-color:#2e6da4;border-right-color:#2e6da4;margin-left:0;margin-right:0}.slider.slider-vertical .slider-tick-label-container{white-space:nowrap}.slider.slider-vertical .slider-tick-label-container .slider-tick-label{padding-left:4px}.slider.slider-vertical.slider-rtl .slider-track{left:initial;right:25%}.slider.slider-vertical.slider-rtl .slider-selection{left:initial;right:0}.slider.slider-vertical.slider-rtl .slider-handle.triangle,.slider.slider-vertical.slider-rtl .slider-tick.triangle{border-width:10px 10px 10px 0}.slider.slider-vertical.slider-rtl .slider-tick-label-container .slider-tick-label{padding-left:initial;padding-right:4px}.slider.slider-disabled .slider-handle{background-image:linear-gradient(to bottom,#dfdfdf 0,#bebebe 100%);background-repeat:repeat-x}.slider.slider-disabled .slider-track{background-image:linear-gradient(to bottom,#e5e5e5 0,#e9e9e9 100%);background-repeat:repeat-x;cursor:not-allowed}.slider input{display:none}.slider .tooltip.top{margin-top:-36px}.slider .tooltip-inner{white-space:nowrap;max-width:none}.slider .hide{display:none}.slider-track{position:absolute;cursor:pointer;background-image:linear-gradient(to bottom,#f5f5f5 0,#f9f9f9 100%);background-repeat:repeat-x;box-shadow:inset 0 1px 2px rgba(0,0,0,.1);border-radius:4px}.slider-selection{position:absolute;background-image:linear-gradient(to bottom,#f9f9f9 0,#f5f5f5 100%);background-repeat:repeat-x;box-shadow:inset 0 -1px 0 rgba(0,0,0,.15);box-sizing:border-box;border-radius:4px}.slider-selection.tick-slider-selection{background-image:linear-gradient(to bottom,#8ac1ef 0,#82b3de 100%);background-repeat:repeat-x}.slider-track-high,.slider-track-low{position:absolute;background:0 0;box-sizing:border-box;border-radius:4px}.slider-handle{position:absolute;top:0;width:20px;height:20px;background-color:#337ab7;background-image:linear-gradient(to bottom,#337ab7 0,#2e6da4 100%);background-repeat:repeat-x;-webkit-filter:none;filter:none;box-shadow:inset 0 1px 0 rgba(255,255,255,.2),0 1px 2px rgba(0,0,0,.05);border:0 solid transparent}.slider-handle.round{border-radius:50%}.slider-handle.custom,.slider-handle.triangle{background:0 0}.slider-handle.custom::before{line-height:20px;font-size:20px;content:'\\2605';color:#726204}.slider-tick{position:absolute;width:20px;height:20px;background-image:linear-gradient(to bottom,#f9f9f9 0,#f5f5f5 100%);background-repeat:repeat-x;box-shadow:inset 0 -1px 0 rgba(0,0,0,.15);box-sizing:border-box;-webkit-filter:none;filter:none;opacity:.8;border:0 solid transparent}.slider-tick.round{border-radius:50%}.slider-tick.custom,.slider-tick.triangle{background:0 0}.slider-tick.custom::before{line-height:20px;font-size:20px;content:'\\2605';color:#726204}.slider-tick.in-selection{background-image:linear-gradient(to bottom,#8ac1ef 0,#82b3de 100%);background-repeat:repeat-x;opacity:1}"],
                    encapsulation: ViewEncapsulation.None
                },] },
    ];
    /** @nocollapse */
    TimeRangeSliderComponent.ctorParameters = function () { return [
        { type: TimeRangeSliderCache }
    ]; };
    TimeRangeSliderComponent.propDecorators = {
        id: [{ type: Input }],
        timeList: [{ type: Input }],
        onTimespanSelected: [{ type: Output }]
    };
    return TimeRangeSliderComponent;
}());
export { TimeRangeSliderComponent };
if (false) {
    /** @type {?} */
    TimeRangeSliderComponent.prototype.id;
    /** @type {?} */
    TimeRangeSliderComponent.prototype.timeList;
    /** @type {?} */
    TimeRangeSliderComponent.prototype.onTimespanSelected;
    /** @type {?} */
    TimeRangeSliderComponent.prototype.start;
    /** @type {?} */
    TimeRangeSliderComponent.prototype.selectionStart;
    /** @type {?} */
    TimeRangeSliderComponent.prototype.end;
    /** @type {?} */
    TimeRangeSliderComponent.prototype.selectionEnd;
    /** @type {?} */
    TimeRangeSliderComponent.prototype.cache;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGltZS1yYW5nZS1zbGlkZXIuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGhlbGdvbGFuZC90aW1lLXJhbmdlLXNsaWRlci8iLCJzb3VyY2VzIjpbImxpYi90aW1lLXJhbmdlLXNsaWRlci5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sa0JBQWtCLENBQUM7QUFFMUIsT0FBTyxFQUFFLFNBQVMsRUFBRSxZQUFZLEVBQUUsS0FBSyxFQUFhLE1BQU0sRUFBaUIsaUJBQWlCLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDcEgsT0FBTyxFQUFFLFFBQVEsRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBRTNDLE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxNQUFNLDZCQUE2QixDQUFDO0FBRW5FLE9BQU8sTUFBTSxNQUFNLFFBQVEsQ0FBQzs7SUFpRjFCLGtDQUNZLEtBQTJCO1FBQTNCLFVBQUssR0FBTCxLQUFLLENBQXNCO2tCQWQzQixFQUFFO2tDQU1zQyxJQUFJLFlBQVksRUFBRTtLQVNqRTs7Ozs7SUFFRSw4Q0FBVzs7OztjQUFDLE9BQXNCOztRQUN2QyxFQUFFLENBQUMsQ0FBQyxPQUFPLGdCQUFhLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDOztZQUN0QyxJQUFJLEdBQUcsVUFBQzs7WUFBQyxJQUFJLEdBQUcsVUFBQztZQUNqQixJQUFJLENBQUMsS0FBSyxHQUFHLEdBQUcsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3BDLElBQUksQ0FBQyxHQUFHLEdBQUcsR0FBRyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDekQsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUN2QyxJQUFJLENBQUMsY0FBYyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUM7Z0JBQ25ELElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQzthQUNoRDtZQUFDLElBQUksQ0FBQyxDQUFDO2dCQUNOLElBQUksQ0FBQyxjQUFjLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQztnQkFDakMsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDO2FBQzlCO1lBQ0QsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDLE1BQU0sQ0FBQztnQkFDdkIsT0FBTyxFQUFFLE1BQU07Z0JBQ2YsR0FBRyxLQUFBO2dCQUNILEdBQUcsS0FBQTtnQkFDSCxLQUFLLEVBQUUsQ0FBQyxJQUFJLENBQUMsY0FBYyxFQUFFLElBQUksQ0FBQyxZQUFZLENBQUM7YUFDaEQsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxXQUFXLEVBQUUsVUFBQyxLQUFVOztnQkFDNUIsSUFBTSxRQUFRLEdBQWEsSUFBSSxRQUFRLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ3hFLEtBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLEtBQUksQ0FBQyxFQUFFLEVBQUUsUUFBUSxDQUFDLENBQUM7Z0JBQ2xDLEtBQUksQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7YUFDeEMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsVUFBQyxLQUFVO2dCQUN4QixLQUFJLENBQUMsY0FBYyxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ3JDLEtBQUksQ0FBQyxZQUFZLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQzthQUNwQyxDQUFDLENBQUM7U0FDSjs7O2dCQTVHSixTQUFTLFNBQUM7b0JBQ1QsUUFBUSxFQUFFLHVCQUF1QjtvQkFDakMsUUFBUSxFQUFFLDBqQkFrQlg7b0JBQ0MsTUFBTSxFQUFFLENBQUMsdW1CQUF1bUIsRUFBRSw2Nk1BdUNvbUksQ0FBQztvQkFDdnRKLGFBQWEsRUFBRSxpQkFBaUIsQ0FBQyxJQUFJO2lCQUN0Qzs7OztnQkFsRVEsb0JBQW9COzs7cUJBcUUxQixLQUFLOzJCQUdMLEtBQUs7cUNBR0wsTUFBTTs7bUNBaEZUOztTQXdFYSx3QkFBd0IiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgJ2Jvb3RzdHJhcC1zbGlkZXInO1xuXG5pbXBvcnQgeyBDb21wb25lbnQsIEV2ZW50RW1pdHRlciwgSW5wdXQsIE9uQ2hhbmdlcywgT3V0cHV0LCBTaW1wbGVDaGFuZ2VzLCBWaWV3RW5jYXBzdWxhdGlvbiB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgVGltZXNwYW4gfSBmcm9tICdAaGVsZ29sYW5kL2NvcmUnO1xuXG5pbXBvcnQgeyBUaW1lUmFuZ2VTbGlkZXJDYWNoZSB9IGZyb20gJy4vdGltZS1yYW5nZS1zbGlkZXIuc2VydmljZSc7XG5cbmltcG9ydCBqcXVlcnkgZnJvbSAnanF1ZXJ5JztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnbjUyLXRpbWUtcmFuZ2Utc2xpZGVyJyxcbiAgdGVtcGxhdGU6IGA8ZGl2IGNsYXNzPVwidGltZS1yYW5nZS1zbGlkZXJcIiBbaGlkZGVuXT1cIiF0aW1lTGlzdFwiPlxuICA8ZGl2IGNsYXNzPVwic2xpZGVyLWNvbnRhaW5lclwiPlxuICAgIDxkaXYgY2xhc3M9XCJsZWZ0LXN0YXJ0XCI+XG4gICAgICA8c3Bhbj57e3N0YXJ0IHwgZGF0ZSA6ICdzaG9ydCd9fTwvc3Bhbj5cbiAgICA8L2Rpdj5cbiAgICA8ZGl2IGNsYXNzPVwiY2VudGVyXCI+XG4gICAgICA8aW5wdXQgaWQ9XCJzbGlkZXJcIiB0eXBlPVwidGV4dFwiIC8+XG4gICAgPC9kaXY+XG4gICAgPGRpdiBjbGFzcz1cInJpZ2h0LWVuZFwiPlxuICAgICAgPHNwYW4+e3tlbmQgfCBkYXRlIDogJ3Nob3J0J319PC9zcGFuPlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbiAgPGRpdiBjbGFzcz1cInNlbGVjdGlvblwiICpuZ0lmPVwic2VsZWN0aW9uU3RhcnRcIj5cbiAgICA8c3Bhbj57e3NlbGVjdGlvblN0YXJ0IHwgZGF0ZSA6ICdzaG9ydCd9fTwvc3Bhbj5cbiAgICA8c3Bhbj4gLSA8L3NwYW4+XG4gICAgPHNwYW4+e3tzZWxlY3Rpb25FbmQgfCBkYXRlIDogJ3Nob3J0J319PC9zcGFuPlxuICA8L2Rpdj5cbjwvZGl2PlxuYCxcbiAgc3R5bGVzOiBbYG41Mi10aW1lLXJhbmdlLXNsaWRlci1zZWxlY3RvciAudGltZS1yYW5nZS1zbGlkZXJ7d2lkdGg6MTAwJX1uNTItdGltZS1yYW5nZS1zbGlkZXItc2VsZWN0b3IgLnRpbWUtcmFuZ2Utc2xpZGVyIC5zbGlkZXItY29udGFpbmVye2Rpc3BsYXk6ZmxleDtkaXNwbGF5Oi13ZWJraXQtZmxleH1uNTItdGltZS1yYW5nZS1zbGlkZXItc2VsZWN0b3IgLnRpbWUtcmFuZ2Utc2xpZGVyIC5sZWZ0LXN0YXJ0LG41Mi10aW1lLXJhbmdlLXNsaWRlci1zZWxlY3RvciAudGltZS1yYW5nZS1zbGlkZXIgLnJpZ2h0LWVuZHt3aWR0aDoxNTBweDtwYWRkaW5nOjAgMTVweH1uNTItdGltZS1yYW5nZS1zbGlkZXItc2VsZWN0b3IgLnRpbWUtcmFuZ2Utc2xpZGVyIC5sZWZ0LXN0YXJ0e3RleHQtYWxpZ246cmlnaHR9bjUyLXRpbWUtcmFuZ2Utc2xpZGVyLXNlbGVjdG9yIC50aW1lLXJhbmdlLXNsaWRlciAuY2VudGVye2ZsZXg6MX1uNTItdGltZS1yYW5nZS1zbGlkZXItc2VsZWN0b3IgLnRpbWUtcmFuZ2Utc2xpZGVyIC5jZW50ZXIgLnNsaWRlcnt3aWR0aDoxMDAlfW41Mi10aW1lLXJhbmdlLXNsaWRlci1zZWxlY3RvciAudGltZS1yYW5nZS1zbGlkZXIgLnNlbGVjdGlvbnt0ZXh0LWFsaWduOmNlbnRlcn1gLCBgLyohID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAgICAgICAgICAgICAgICAgICBWRVJTSU9OICA5LjkuMCAgICAgICAgICAgICAgXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi8vKiEgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiBib290c3RyYXAtc2xpZGVyLmpzXG4gKlxuICogTWFpbnRhaW5lcnM6XG4gKlx0XHRLeWxlIEtlbXBcbiAqXHRcdFx0LSBUd2l0dGVyOiBAc2VpeXJpYVxuICpcdFx0XHQtIEdpdGh1YjogIHNlaXlyaWFcbiAqXHRcdFJvaGl0IEthbGt1clxuICpcdFx0XHQtIFR3aXR0ZXI6IEBSb3ZvbHV0aW9uYXJ5XG4gKlx0XHRcdC0gR2l0aHViOiAgcm92b2x1dGlvblxuICpcbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAqXG4gKiBib290c3RyYXAtc2xpZGVyIGlzIHJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZVxuICogQ29weXJpZ2h0IChjKSAyMDE3IEt5bGUgS2VtcCwgUm9oaXQgS2Fsa3VyLCBhbmQgY29udHJpYnV0b3JzXG4gKiBcbiAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uXG4gKiBvYnRhaW5pbmcgYSBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvblxuICogZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0XG4gKiByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSxcbiAqIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsXG4gKiBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGVcbiAqIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nXG4gKiBjb25kaXRpb25zOlxuICogXG4gKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZVxuICogaW5jbHVkZWQgaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4gKiBcbiAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsXG4gKiBFWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVNcbiAqIE9GIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EXG4gKiBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVFxuICogSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksXG4gKiBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkdcbiAqIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1JcbiAqIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cbiAqXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi8uc2xpZGVye2Rpc3BsYXk6aW5saW5lLWJsb2NrO3ZlcnRpY2FsLWFsaWduOm1pZGRsZTtwb3NpdGlvbjpyZWxhdGl2ZX0uc2xpZGVyLnNsaWRlci1ob3Jpem9udGFse3dpZHRoOjIxMHB4O2hlaWdodDoyMHB4fS5zbGlkZXIuc2xpZGVyLWhvcml6b250YWwgLnNsaWRlci10cmFja3toZWlnaHQ6MTBweDt3aWR0aDoxMDAlO21hcmdpbi10b3A6LTVweDt0b3A6NTAlO2xlZnQ6MH0uc2xpZGVyLnNsaWRlci1ob3Jpem9udGFsIC5zbGlkZXItc2VsZWN0aW9uLC5zbGlkZXIuc2xpZGVyLWhvcml6b250YWwgLnNsaWRlci10cmFjay1oaWdoLC5zbGlkZXIuc2xpZGVyLWhvcml6b250YWwgLnNsaWRlci10cmFjay1sb3d7aGVpZ2h0OjEwMCU7dG9wOjA7Ym90dG9tOjB9LnNsaWRlci5zbGlkZXItaG9yaXpvbnRhbCAuc2xpZGVyLWhhbmRsZSwuc2xpZGVyLnNsaWRlci1ob3Jpem9udGFsIC5zbGlkZXItdGlja3ttYXJnaW4tbGVmdDotMTBweH0uc2xpZGVyLnNsaWRlci1ob3Jpem9udGFsIC5zbGlkZXItaGFuZGxlLnRyaWFuZ2xlLC5zbGlkZXIuc2xpZGVyLWhvcml6b250YWwgLnNsaWRlci10aWNrLnRyaWFuZ2xle3Bvc2l0aW9uOnJlbGF0aXZlO3RvcDo1MCU7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlWSgtNTAlKTt0cmFuc2Zvcm06dHJhbnNsYXRlWSgtNTAlKTtib3JkZXItd2lkdGg6MCAxMHB4IDEwcHg7d2lkdGg6MDtoZWlnaHQ6MDtib3JkZXItYm90dG9tLWNvbG9yOiMyZTZkYTQ7bWFyZ2luLXRvcDowfS5zbGlkZXIuc2xpZGVyLWhvcml6b250YWwgLnNsaWRlci10aWNrLWNvbnRhaW5lcnt3aGl0ZS1zcGFjZTpub3dyYXA7cG9zaXRpb246YWJzb2x1dGU7dG9wOjA7bGVmdDowO3dpZHRoOjEwMCV9LnNsaWRlci5zbGlkZXItaG9yaXpvbnRhbCAuc2xpZGVyLXRpY2stbGFiZWwtY29udGFpbmVye3doaXRlLXNwYWNlOm5vd3JhcDttYXJnaW4tdG9wOjIwcHh9LnNsaWRlci5zbGlkZXItaG9yaXpvbnRhbCAuc2xpZGVyLXRpY2stbGFiZWwtY29udGFpbmVyIC5zbGlkZXItdGljay1sYWJlbHtwYWRkaW5nLXRvcDo0cHg7ZGlzcGxheTppbmxpbmUtYmxvY2s7dGV4dC1hbGlnbjpjZW50ZXJ9LnNsaWRlci5zbGlkZXItaG9yaXpvbnRhbC5zbGlkZXItcnRsIC5zbGlkZXItdHJhY2t7bGVmdDppbml0aWFsO3JpZ2h0OjB9LnNsaWRlci5zbGlkZXItaG9yaXpvbnRhbC5zbGlkZXItcnRsIC5zbGlkZXItaGFuZGxlLC5zbGlkZXIuc2xpZGVyLWhvcml6b250YWwuc2xpZGVyLXJ0bCAuc2xpZGVyLXRpY2t7bWFyZ2luLWxlZnQ6aW5pdGlhbDttYXJnaW4tcmlnaHQ6LTEwcHh9LnNsaWRlci5zbGlkZXItaG9yaXpvbnRhbC5zbGlkZXItcnRsIC5zbGlkZXItdGljay1jb250YWluZXJ7bGVmdDppbml0aWFsO3JpZ2h0OjB9LnNsaWRlci5zbGlkZXItdmVydGljYWx7aGVpZ2h0OjIxMHB4O3dpZHRoOjIwcHh9LnNsaWRlci5zbGlkZXItdmVydGljYWwgLnNsaWRlci10cmFja3t3aWR0aDoxMHB4O2hlaWdodDoxMDAlO2xlZnQ6MjUlO3RvcDowfS5zbGlkZXIuc2xpZGVyLXZlcnRpY2FsIC5zbGlkZXItc2VsZWN0aW9ue3dpZHRoOjEwMCU7bGVmdDowO3RvcDowO2JvdHRvbTowfS5zbGlkZXIuc2xpZGVyLXZlcnRpY2FsIC5zbGlkZXItdHJhY2staGlnaCwuc2xpZGVyLnNsaWRlci12ZXJ0aWNhbCAuc2xpZGVyLXRyYWNrLWxvd3t3aWR0aDoxMDAlO2xlZnQ6MDtyaWdodDowfS5zbGlkZXIuc2xpZGVyLXZlcnRpY2FsIC5zbGlkZXItaGFuZGxlLC5zbGlkZXIuc2xpZGVyLXZlcnRpY2FsIC5zbGlkZXItdGlja3ttYXJnaW4tdG9wOi0xMHB4fS5zbGlkZXIuc2xpZGVyLXZlcnRpY2FsIC5zbGlkZXItaGFuZGxlLnRyaWFuZ2xlLC5zbGlkZXIuc2xpZGVyLXZlcnRpY2FsIC5zbGlkZXItdGljay50cmlhbmdsZXtib3JkZXItd2lkdGg6MTBweCAwIDEwcHggMTBweDt3aWR0aDoxcHg7aGVpZ2h0OjFweDtib3JkZXItbGVmdC1jb2xvcjojMmU2ZGE0O2JvcmRlci1yaWdodC1jb2xvcjojMmU2ZGE0O21hcmdpbi1sZWZ0OjA7bWFyZ2luLXJpZ2h0OjB9LnNsaWRlci5zbGlkZXItdmVydGljYWwgLnNsaWRlci10aWNrLWxhYmVsLWNvbnRhaW5lcnt3aGl0ZS1zcGFjZTpub3dyYXB9LnNsaWRlci5zbGlkZXItdmVydGljYWwgLnNsaWRlci10aWNrLWxhYmVsLWNvbnRhaW5lciAuc2xpZGVyLXRpY2stbGFiZWx7cGFkZGluZy1sZWZ0OjRweH0uc2xpZGVyLnNsaWRlci12ZXJ0aWNhbC5zbGlkZXItcnRsIC5zbGlkZXItdHJhY2t7bGVmdDppbml0aWFsO3JpZ2h0OjI1JX0uc2xpZGVyLnNsaWRlci12ZXJ0aWNhbC5zbGlkZXItcnRsIC5zbGlkZXItc2VsZWN0aW9ue2xlZnQ6aW5pdGlhbDtyaWdodDowfS5zbGlkZXIuc2xpZGVyLXZlcnRpY2FsLnNsaWRlci1ydGwgLnNsaWRlci1oYW5kbGUudHJpYW5nbGUsLnNsaWRlci5zbGlkZXItdmVydGljYWwuc2xpZGVyLXJ0bCAuc2xpZGVyLXRpY2sudHJpYW5nbGV7Ym9yZGVyLXdpZHRoOjEwcHggMTBweCAxMHB4IDB9LnNsaWRlci5zbGlkZXItdmVydGljYWwuc2xpZGVyLXJ0bCAuc2xpZGVyLXRpY2stbGFiZWwtY29udGFpbmVyIC5zbGlkZXItdGljay1sYWJlbHtwYWRkaW5nLWxlZnQ6aW5pdGlhbDtwYWRkaW5nLXJpZ2h0OjRweH0uc2xpZGVyLnNsaWRlci1kaXNhYmxlZCAuc2xpZGVyLWhhbmRsZXtiYWNrZ3JvdW5kLWltYWdlOmxpbmVhci1ncmFkaWVudCh0byBib3R0b20sI2RmZGZkZiAwLCNiZWJlYmUgMTAwJSk7YmFja2dyb3VuZC1yZXBlYXQ6cmVwZWF0LXh9LnNsaWRlci5zbGlkZXItZGlzYWJsZWQgLnNsaWRlci10cmFja3tiYWNrZ3JvdW5kLWltYWdlOmxpbmVhci1ncmFkaWVudCh0byBib3R0b20sI2U1ZTVlNSAwLCNlOWU5ZTkgMTAwJSk7YmFja2dyb3VuZC1yZXBlYXQ6cmVwZWF0LXg7Y3Vyc29yOm5vdC1hbGxvd2VkfS5zbGlkZXIgaW5wdXR7ZGlzcGxheTpub25lfS5zbGlkZXIgLnRvb2x0aXAudG9we21hcmdpbi10b3A6LTM2cHh9LnNsaWRlciAudG9vbHRpcC1pbm5lcnt3aGl0ZS1zcGFjZTpub3dyYXA7bWF4LXdpZHRoOm5vbmV9LnNsaWRlciAuaGlkZXtkaXNwbGF5Om5vbmV9LnNsaWRlci10cmFja3twb3NpdGlvbjphYnNvbHV0ZTtjdXJzb3I6cG9pbnRlcjtiYWNrZ3JvdW5kLWltYWdlOmxpbmVhci1ncmFkaWVudCh0byBib3R0b20sI2Y1ZjVmNSAwLCNmOWY5ZjkgMTAwJSk7YmFja2dyb3VuZC1yZXBlYXQ6cmVwZWF0LXg7Ym94LXNoYWRvdzppbnNldCAwIDFweCAycHggcmdiYSgwLDAsMCwuMSk7Ym9yZGVyLXJhZGl1czo0cHh9LnNsaWRlci1zZWxlY3Rpb257cG9zaXRpb246YWJzb2x1dGU7YmFja2dyb3VuZC1pbWFnZTpsaW5lYXItZ3JhZGllbnQodG8gYm90dG9tLCNmOWY5ZjkgMCwjZjVmNWY1IDEwMCUpO2JhY2tncm91bmQtcmVwZWF0OnJlcGVhdC14O2JveC1zaGFkb3c6aW5zZXQgMCAtMXB4IDAgcmdiYSgwLDAsMCwuMTUpO2JveC1zaXppbmc6Ym9yZGVyLWJveDtib3JkZXItcmFkaXVzOjRweH0uc2xpZGVyLXNlbGVjdGlvbi50aWNrLXNsaWRlci1zZWxlY3Rpb257YmFja2dyb3VuZC1pbWFnZTpsaW5lYXItZ3JhZGllbnQodG8gYm90dG9tLCM4YWMxZWYgMCwjODJiM2RlIDEwMCUpO2JhY2tncm91bmQtcmVwZWF0OnJlcGVhdC14fS5zbGlkZXItdHJhY2staGlnaCwuc2xpZGVyLXRyYWNrLWxvd3twb3NpdGlvbjphYnNvbHV0ZTtiYWNrZ3JvdW5kOjAgMDtib3gtc2l6aW5nOmJvcmRlci1ib3g7Ym9yZGVyLXJhZGl1czo0cHh9LnNsaWRlci1oYW5kbGV7cG9zaXRpb246YWJzb2x1dGU7dG9wOjA7d2lkdGg6MjBweDtoZWlnaHQ6MjBweDtiYWNrZ3JvdW5kLWNvbG9yOiMzMzdhYjc7YmFja2dyb3VuZC1pbWFnZTpsaW5lYXItZ3JhZGllbnQodG8gYm90dG9tLCMzMzdhYjcgMCwjMmU2ZGE0IDEwMCUpO2JhY2tncm91bmQtcmVwZWF0OnJlcGVhdC14Oy13ZWJraXQtZmlsdGVyOm5vbmU7ZmlsdGVyOm5vbmU7Ym94LXNoYWRvdzppbnNldCAwIDFweCAwIHJnYmEoMjU1LDI1NSwyNTUsLjIpLDAgMXB4IDJweCByZ2JhKDAsMCwwLC4wNSk7Ym9yZGVyOjAgc29saWQgdHJhbnNwYXJlbnR9LnNsaWRlci1oYW5kbGUucm91bmR7Ym9yZGVyLXJhZGl1czo1MCV9LnNsaWRlci1oYW5kbGUuY3VzdG9tLC5zbGlkZXItaGFuZGxlLnRyaWFuZ2xle2JhY2tncm91bmQ6MCAwfS5zbGlkZXItaGFuZGxlLmN1c3RvbTo6YmVmb3Jle2xpbmUtaGVpZ2h0OjIwcHg7Zm9udC1zaXplOjIwcHg7Y29udGVudDonXFxcXDI2MDUnO2NvbG9yOiM3MjYyMDR9LnNsaWRlci10aWNre3Bvc2l0aW9uOmFic29sdXRlO3dpZHRoOjIwcHg7aGVpZ2h0OjIwcHg7YmFja2dyb3VuZC1pbWFnZTpsaW5lYXItZ3JhZGllbnQodG8gYm90dG9tLCNmOWY5ZjkgMCwjZjVmNWY1IDEwMCUpO2JhY2tncm91bmQtcmVwZWF0OnJlcGVhdC14O2JveC1zaGFkb3c6aW5zZXQgMCAtMXB4IDAgcmdiYSgwLDAsMCwuMTUpO2JveC1zaXppbmc6Ym9yZGVyLWJveDstd2Via2l0LWZpbHRlcjpub25lO2ZpbHRlcjpub25lO29wYWNpdHk6Ljg7Ym9yZGVyOjAgc29saWQgdHJhbnNwYXJlbnR9LnNsaWRlci10aWNrLnJvdW5ke2JvcmRlci1yYWRpdXM6NTAlfS5zbGlkZXItdGljay5jdXN0b20sLnNsaWRlci10aWNrLnRyaWFuZ2xle2JhY2tncm91bmQ6MCAwfS5zbGlkZXItdGljay5jdXN0b206OmJlZm9yZXtsaW5lLWhlaWdodDoyMHB4O2ZvbnQtc2l6ZToyMHB4O2NvbnRlbnQ6J1xcXFwyNjA1Jztjb2xvcjojNzI2MjA0fS5zbGlkZXItdGljay5pbi1zZWxlY3Rpb257YmFja2dyb3VuZC1pbWFnZTpsaW5lYXItZ3JhZGllbnQodG8gYm90dG9tLCM4YWMxZWYgMCwjODJiM2RlIDEwMCUpO2JhY2tncm91bmQtcmVwZWF0OnJlcGVhdC14O29wYWNpdHk6MX1gXSxcbiAgZW5jYXBzdWxhdGlvbjogVmlld0VuY2Fwc3VsYXRpb24uTm9uZVxufSlcbmV4cG9ydCBjbGFzcyBUaW1lUmFuZ2VTbGlkZXJDb21wb25lbnQgaW1wbGVtZW50cyBPbkNoYW5nZXMge1xuXG4gIEBJbnB1dCgpXG4gIHB1YmxpYyBpZCA9ICcnO1xuXG4gIEBJbnB1dCgpXG4gIHB1YmxpYyB0aW1lTGlzdDogbnVtYmVyW107XG5cbiAgQE91dHB1dCgpXG4gIHB1YmxpYyBvblRpbWVzcGFuU2VsZWN0ZWQ6IEV2ZW50RW1pdHRlcjxUaW1lc3Bhbj4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cbiAgcHVibGljIHN0YXJ0OiBudW1iZXI7XG4gIHB1YmxpYyBzZWxlY3Rpb25TdGFydDogbnVtYmVyO1xuICBwdWJsaWMgZW5kOiBudW1iZXI7XG4gIHB1YmxpYyBzZWxlY3Rpb25FbmQ6IG51bWJlcjtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcm90ZWN0ZWQgY2FjaGU6IFRpbWVSYW5nZVNsaWRlckNhY2hlXG4gICkgeyB9XG5cbiAgcHVibGljIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpOiB2b2lkIHtcbiAgICBpZiAoY2hhbmdlcy50aW1lTGlzdCAmJiB0aGlzLnRpbWVMaXN0KSB7XG4gICAgICBsZXQgbWluOyBsZXQgbWF4O1xuICAgICAgdGhpcy5zdGFydCA9IG1pbiA9IHRoaXMudGltZUxpc3RbMF07XG4gICAgICB0aGlzLmVuZCA9IG1heCA9IHRoaXMudGltZUxpc3RbdGhpcy50aW1lTGlzdC5sZW5ndGggLSAxXTtcbiAgICAgIGlmICh0aGlzLmlkICYmIHRoaXMuY2FjaGUuaGFzKHRoaXMuaWQpKSB7XG4gICAgICAgIHRoaXMuc2VsZWN0aW9uU3RhcnQgPSB0aGlzLmNhY2hlLmdldCh0aGlzLmlkKS5mcm9tO1xuICAgICAgICB0aGlzLnNlbGVjdGlvbkVuZCA9IHRoaXMuY2FjaGUuZ2V0KHRoaXMuaWQpLnRvO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25TdGFydCA9IHRoaXMuc3RhcnQ7XG4gICAgICAgIHRoaXMuc2VsZWN0aW9uRW5kID0gdGhpcy5lbmQ7XG4gICAgICB9XG4gICAgICBqcXVlcnkoJyNzbGlkZXInKS5zbGlkZXIoe1xuICAgICAgICB0b29sdGlwOiAnaGlkZScsXG4gICAgICAgIG1pbixcbiAgICAgICAgbWF4LFxuICAgICAgICB2YWx1ZTogW3RoaXMuc2VsZWN0aW9uU3RhcnQsIHRoaXMuc2VsZWN0aW9uRW5kXVxuICAgICAgfSkub24oJ3NsaWRlU3RvcCcsIChldmVudDogYW55KSA9PiB7XG4gICAgICAgIGNvbnN0IHRpbWVzcGFuOiBUaW1lc3BhbiA9IG5ldyBUaW1lc3BhbihldmVudC52YWx1ZVswXSwgZXZlbnQudmFsdWVbMV0pO1xuICAgICAgICB0aGlzLmNhY2hlLnNldCh0aGlzLmlkLCB0aW1lc3Bhbik7XG4gICAgICAgIHRoaXMub25UaW1lc3BhblNlbGVjdGVkLmVtaXQodGltZXNwYW4pO1xuICAgICAgfSkub24oJ3NsaWRlJywgKGV2ZW50OiBhbnkpID0+IHtcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25TdGFydCA9IGV2ZW50LnZhbHVlWzBdO1xuICAgICAgICB0aGlzLnNlbGVjdGlvbkVuZCA9IGV2ZW50LnZhbHVlWzFdO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG59XG4iXX0=