!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@helgoland/core"),require("@angular/common"),require("@angular/forms")):"function"==typeof define&&define.amd?define("@helgoland/time",["exports","@angular/core","@helgoland/core","@angular/common","@angular/forms"],t):t((e.helgoland=e.helgoland||{},e.helgoland.time={}),e.ng.core,null,e.ng.common,e.ng.forms)}(this,function(exports,core,core$1,common,forms){"use strict";var PredefinedTimespanSelectorComponent=function(){function PredefinedTimespanSelectorComponent(e){this.settingSrvc=e,this.onTimespanChange=new core.EventEmitter}return PredefinedTimespanSelectorComponent.prototype.ngOnInit=function(){var t=this,e=this.settingSrvc.getSettings().timespanPresets;e&&(this.parsedTimespanPresets=e.filter(function(e){return t.isSafeTimespanPreset(e)}).map(function(e){return{name:e.name,label:e.label,timespan:{from:t.parseMomentExpression(e.timespan.from).getTime(),to:t.parseMomentExpression(e.timespan.to).getTime()},seperatorAfterThisItem:e.seperatorAfterThisItem}}))},PredefinedTimespanSelectorComponent.prototype.isSafeMomentExpression=function(e){return new RegExp(/^moment\(\)(\.(((add|subtract)\(\d+, ?['"](years|y|quarters|Q|months|M|weeks|w|days|d|hours|h|minutes|m|seconds|s|milliseconds|ms)['"]\))|((startOf|endOf)\(['"](year|month|quarter|week|isoWeek|day|date|hour|minute|second)['"]\))|((year|month|date|hours|minutes|seconds|milliseconds)\(\d+\))))*;?$/).test(e)},PredefinedTimespanSelectorComponent.prototype.isSafeTimespanPreset=function(e){return!!(this.isSafeMomentExpression(e.timespan.from)&&this.isSafeMomentExpression(e.timespan.to))||(console.log('Timespan preset "'+e.name+'" has invalid moment() expression!'),!1)},PredefinedTimespanSelectorComponent.prototype.parseMomentExpression=function(expression){return this.isSafeMomentExpression(expression)?eval(expression)._d:null},PredefinedTimespanSelectorComponent.prototype.timespanChanged=function(e){this.timespan=new core$1.Timespan(parseInt(e.timespan.from,10),parseInt(e.timespan.to,10)),this.onTimespanChange.emit(this.timespan)},PredefinedTimespanSelectorComponent.decorators=[{type:core.Component,args:[{selector:"n52-predefined-timespan-selector",template:'<span *ngFor="let item of parsedTimespanPresets">\n  <button (click)="timespanChanged(item)" [ngClass]="{\'seperator-after-this-item\': item.seperatorAfterThisItem}" class="btn btn-sm btn-default">\n    {{item.label}}\n  </button>\n  <br>\n</span>\n',styles:[":host :not(.seperator-after-this-item)+br{display:none}:host button{margin:3px}"]}]}],PredefinedTimespanSelectorComponent.ctorParameters=function(){return[{type:core$1.SettingsService}]},PredefinedTimespanSelectorComponent.propDecorators={timespan:[{type:core.Input}],onTimespanChange:[{type:core.Output}]},PredefinedTimespanSelectorComponent}(),TimeListSelectorComponent=function(){function e(){this.onTimeSelected=new core.EventEmitter}return e.prototype.selectTime=function(e){this.onTimeSelected.emit(e)},e.decorators=[{type:core.Component,args:[{selector:"n52-time-list-selector",template:'<div class="selector-entry" *ngFor="let time of timeList" (click)="selectTime(time)">\n  <span>{{time | date: \'medium\'}}</span>\n</div>\n'}]}],e.propDecorators={timeList:[{type:core.Input}],onTimeSelected:[{type:core.Output}]},e}(),TimespanButtonComponent=function(){function e(e){this.predefinedSrvc=e,this.onTimespanSelected=new core.EventEmitter}return e.prototype.clicked=function(){this.predefined?this.onTimespanSelected.emit(this.predefinedSrvc.getInterval(this.predefined)):this.timespanFunc?this.onTimespanSelected.emit(this.timespanFunc()):this.onTimespanSelected.emit()},e.decorators=[{type:core.Component,args:[{selector:"n52-timespan-button",template:'<button type="button" class="btn" (click)="clicked()">\n  {{label}}\n</button>\n'}]}],e.ctorParameters=function(){return[{type:core$1.DefinedTimespanService}]},e.propDecorators={predefined:[{type:core.Input}],label:[{type:core.Input}],timespanFunc:[{type:core.Input}],onTimespanSelected:[{type:core.Output}]},e}(),TimespanShiftSelectorComponent=function(){function e(e){this.timeSrvc=e,this.onTimespanChange=new core.EventEmitter,this.onOpenTimeSettings=new core.EventEmitter}return e.prototype.back=function(){this.onTimespanChange.emit(this.timeSrvc.stepBack(this.timespan))},e.prototype.forward=function(){this.onTimespanChange.emit(this.timeSrvc.stepForward(this.timespan))},e.prototype.open=function(){this.onOpenTimeSettings.emit()},e.decorators=[{type:core.Component,args:[{selector:"n52-timespan-shift-selector",template:'<div>\n  <button type="button" (click)="back()"> &lt; </button>\n  <button type="button" (click)="open()">\n    {{timespan.from | date : \'medium\'}} &nbsp;&ndash;&nbsp; {{timespan.to | date : \'medium\'}}\n  </button>\n  <button type="button" (click)="forward()"> &gt; </button>\n</div>\n'}]}],e.ctorParameters=function(){return[{type:core$1.Time}]},e.propDecorators={timespan:[{type:core.Input}],onTimespanChange:[{type:core.Output}],onOpenTimeSettings:[{type:core.Output}]},e}(),COMPONENTS=[PredefinedTimespanSelectorComponent,TimeListSelectorComponent,TimespanShiftSelectorComponent,TimespanButtonComponent],HelgolandTimeModule=function(){function e(){}return e.decorators=[{type:core.NgModule,args:[{declarations:[COMPONENTS],imports:[common.CommonModule,forms.FormsModule,core$1.HelgolandCoreModule],exports:[COMPONENTS]}]}],e}();exports.HelgolandTimeModule=HelgolandTimeModule,exports.PredefinedTimespanSelectorComponent=PredefinedTimespanSelectorComponent,exports.TimeListSelectorComponent=TimeListSelectorComponent,exports.TimespanButtonComponent=TimespanButtonComponent,exports.TimespanShiftSelectorComponent=TimespanShiftSelectorComponent,Object.defineProperty(exports,"__esModule",{value:!0})});
//# sourceMappingURL=helgoland-time.umd.min.js.map